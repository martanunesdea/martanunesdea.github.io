<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Marta Nunes de Abreu</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Sonsie+One" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500&family=Oxygen:wght@300&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf" crossorigin="anonymous"></script>
    <link href="../styles/style.css" rel="stylesheet">

    <!-- the below three lines are a fix to get HTML5 semantic elements working in old versions of Internet Explorer-->
    <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
    <![endif]-->

    <nav class="navbar navbar-expand-sm">
      <div class="container">
        <a class="navbar-brand text-white" href="./index.html">Marta Nunes de Abreu</a>
        <div class="navbar-nav d-flex flex-row">
          <a class="nav-link text-white" href="./articles.html">Articles</a>
          <a class="nav-link text-white" href="./daily_log.html">Daily Log</a>
        </div>
      </div>
    </nav>
    
  </head>

  <body>

    <!-- Main content -->
    <main>
  
        <h1 class="article-title">File compression with zlib in C++</h1>
        
        <p>This article belongs to a series that I've labelled "portable programs for bigger projects". There are things that do not come built-in with C++ but that are nice to have in the programs you develop. In this article, I'll be looking at how to compress a file with C++.</p>
        <h3 class="article-title2">Step 1. Research on third-party library</h3>
        <p>There are a few libraries based on C that are nicely compatible with C++ and are reliable and well maintained. I think there's also a Boost library that enables compression. However, I went with zlib, which is a library written in C but compatible with C++, as I thought using a compact library that is enclosed within a header file would be nicer.</p>

        <h3 class="article-title2">Step 2. Download library and test it</h3>
        <p>Downloading the binary files for the library is quite straightforward. Once you have the correct binary files for your machine, you can compile the library using Make. Once this is done, I run the make test command on my terminal to check it was working. </p>
        
        <h3 class="article-title2">Step 3. Run a simple command within a source file</h3>
        <p>Now that the files are downloaded and accessible through one file, we can link that file onto our own Makefile and compile our program whilst using functions from zlib.</p>
        <p>Instructions for Makefile: </p>
        <div class="code">
          <p class="comment"># Makefile</p>
          <p>CXX=clang++</p>
          <p>CXXFLAGS = -Wall -std=c++17</p>
          <p class="comment"># Use the directory that contains the boost directory</p>
          <p>CRYPTO_LIBRARIES = ./zlib</p>
          <p>LFLAGS += -L$(CRYPTO_LIBRARIES)</p>
          <p>all: main</p>
          <p>main: main.cpp</p>
          <p> $(CXX) $(CXXFLAGS) main.cpp -o main $(LFLAGS) -zlib</p>
          <p>clean: </p>
          <p> rm -rf main</p>
        </div>
        <p>In our main source file, we need to ensure the header file for the library is included.</p>
        <p>Instructions for using zlib functions:</p>
        <p>I went through a couple of examples from the Crypto++ documentation wiki and ended up with this as the final code: </p>
        <div class="code">
            <p>some c code here</p>
        </div>

        <h3 class="article-title2" >Step 4. Read in a file, adn compress it.</h3>
        <p>Ok, this is sort of like two steps really.</p>
        <h3>a. Read in a file</h3>
        <div class="code">
            <p>FILE *fp = fopen("my_file.txt", "r");</p>
            <p class="comment">// Now, read in content and compress that content</p>
            <p class="comment">while ( *fp != NULL ) {</p>
            <p class="comment">    // some code here </p>
            <p class="comment">    } </p>
        </div>

    </main>


    <!-- Footer -->
    <footer>
      <p>Â©Copyright 2020. All rights reversed.</p>
    </footer>

  </body>
</html>
