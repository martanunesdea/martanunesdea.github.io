<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Marta Nunes de Abreu</title>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Sonsie+One" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2&family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@500&family=Oxygen:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Allura&family=Dancing+Script:wght@700&family=Great+Vibes&family=Pinyon+Script&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js" integrity="sha384-LtrjvnR4Twt/qOuYxE721u19sVFLVSA4hf/rRt6PrZTmiPltdZcI7q7PXQBYTKyf" crossorigin="anonymous"></script>
    <link href="../styles/style.css" rel="stylesheet">

    <!-- the below three lines are a fix to get HTML5 semantic elements working in old versions of Internet Explorer-->
    <!--[if lt IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>
      <div class="container">
        <div class="side-l">
        </div>
        <nav class="navigation">
          <ul>
            <li class="item1">
                <a href="../index.html">Marta Nunes de Abreu</a>
            </li>
            <li class="item2">
                <a href="./articles.html">Articles</a>
            </li>
            <li class="item3">
                <a href="./about.html">About</a>
            </li>
          </ul>
        </nav>
        <div class="side-r">
        </div>
      
      
      
        <!-- BODY -->
        <div class="links">
        </div>
      
        <div class="content">
        <h1>Authentication with Crypto++</h1>
        <h3>A portable program for bigger projects</h3>
        
        <p>As authentication starts to become an essential requirement for most projects, I decided to make a quick program that allows this in C++. I'm aware it needs a few less lines of code in other languages, but ultimately the idea is that the program would be associated with a C++ project.</p>
        <h2>Step 1. Get input username and password</h2>
        <p>First, open up your editor and add the boilercode needed to get going with C++. Get an username and password from the user. My program looked a bit like this: </p>
        <div class="code">
          <p>#include &lt;cstdlib&gt; </p>
          <p>#include &lt;cstdio&gt;</p>
          <p>#include &lt;iostream&gt;</p>
          <p>#include &lt;string&gt;</p>
          <p>int main(){ </p>
          <p>/* Ask user for credentials */ </p>
          <p> 
            std::string password;
            std::string username;
          </p>
          <p>
            std::cout << "\nEnter username: ";
            std::cin >> username;
          </p>
          <p>
            std::cout << "\nEnter password: \n";
            std::cin >> password;
          </p>
          <p>
              if (valid_credentials(username, hash)) 
                  std::cout << "You're in\n\n";
          </p>
          <p>
              else 
                  std::cout << "Sorry, no\n\n";

            }
        </div>
        <h2>Step 2. Generate a hash from the password</h2>
        <p>For this, I first used the standard's hash library but, upon realising that it does not guarantee the hash to be unbreakable, I got a bit dissappointed. The most popular solution for cryptography-related functions in C++ is Crypto++.</p>
        <h3>Install and add Crypto++ to Cpp files</h3>
        <p>The first impression is that the documentation for Crypto++ is a bit sparse but, there seems to be enough people working on it that the installation process has been made quite simple.</p>
        <p>1. Download the zip folder and extract the contents.</p>
        <p>2. Once installed, from the command line run: </p>
        <div class="code">
          <p>> make</p>
          <p>> make test</p>
          <p>> install</p>
        </div>
        <p>3. Once it's installed, you've got to reference the crypto++ folder in your makefile, and you've got to link the actual compiled library file (libcryptopp.a) into the makefile.</p>
        <div class="code">
          <p class="comment"># Makefile</p>
          <p>CXX=clang++</p>
          <p>CXXFLAGS = -Wall -std=c++17</p>
          <p class="comment"># Use the directory that contains the boost directory</p>
          <p>CRYPTO_LIBRARIES = ./cryptopp840</p>
          <p>LFLAGS += -L$(CRYPTO_LIBRARIES)</p>
          <p>all: main</p>
          <p>main: main.cpp</p>
          <p> $(CXX) $(CXXFLAGS) main.cpp -o main $(LFLAGS) -lcryptopp</p>
          <p>clean: </p>
          <p> rm -rf main</p>
        </div>
        <p>Then, the correct header files need to be included from your cpp source file. And of course, you've got to work out how to generate a hash using Crypto++.</p>
        <h3>Implement the hashing function for strings</h3>
        <p>I went through a couple of examples from the Crypto++ documentation wiki and ended up with this as the final code: </p>
        <div class="code">
          <p>std::string hash_credentials(std::string password) </p>
          <p>  { </p>
          <p>CryptoPP::SHA256 hash;</p>
          <p> CryptoPP::byte digest[ CryptoPP::SHA256::DIGESTSIZE ];</p>
          <p>std::string msg = password;</p>
          <p>hash.CalculateDigest( digest, (CryptoPP::byte*) msg.c_str(), msg.length() );</p>
          <p>CryptoPP::HexEncoder encoder;</p>
          <p>std::string output;</p>
          <p>encoder.Attach( new CryptoPP::StringSink( output ) );</p>
          <p>encoder.Put( digest, sizeof(digest) );</p>    
          <p>encoder.MessageEnd();</p>  
          <p>// std::cout << "hashed password: " << output << std::endl; </p>
          <p>return output; </p>
          <p>}</p>
        </div>
        <h2>Step 3. Validate hashed password with stored hashes.</h2>
        <p>Ok, this is sort of like two steps really.</p>
        <div class="code">
        <p>Hello;</p>
        <p>std::cout << "this is how you write C++ code" << std::endl</p>
        </div>        
        </div>
      
        <div class="ads">
        </div>
      
      </div>
    


    <!-- Footer -->
    <div class="footer">
      <p>Â© Copyright 2020. All rights reversed.</p>
    </div>

  </body>
</html>
